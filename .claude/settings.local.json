{
  "permissions": {
    "allow": [
      "Bash(npx prisma migrate dev:*)",
      "Bash(npx tsc:*)",
      "Bash(npx ts-node-dev:*)",
      "Bash(curl:*)",
      "Bash(npm create:*)",
      "Bash(npm install)",
      "Bash(npm install:*)",
      "Bash(npx prisma generate:*)",
      "Bash(npm run build:*)",
      "Bash(ls:*)",
      "Bash(sqlite3:*)",
      "Bash(npm run dev)",
      "Bash(pkill:*)",
      "Bash(lsof:*)",
      "Bash(xargs kill:*)",
      "Bash(tmux:*)",
      "Bash(chmod:*)",
      "Bash(./scripts/dev-servers.sh:*)",
      "Bash(wc:*)",
      "Bash(node:*)",
      "Bash(npx ts-node:*)",
      "Bash(npx prisma db execute:*)",
      "Bash(/home/faelan/code/WealthCraft/web/src/App.css <<'EOF'\n\n/* Readonly input for asset market display */\n.readonly-input {\n  background: #f5f5f5;\n  color: #666;\n  cursor: not-allowed;\n  border: 1px solid #ddd;\n}\nEOF)",
      "Bash(python3:*)",
      "Bash(__NEW_LINE_0f0b29054116ddc3__ python3 <<'EOF'\nimport json\nwith open\\('/tmp/nasdaq_etf.json'\\) as f:\n    data = json.load\\(f\\)\n\nrows = data.get\\('data', {}\\).get\\('data', {}\\).get\\('rows', []\\)\nprint\\(f'ETFæ€»æ•°: {len\\(rows\\)}'\\)\n\n# æœç´¢TLT\nfor r in rows:\n    if r.get\\('symbol'\\) == 'TLT':\n        print\\(f'\\\\næ‰¾åˆ°TLT: {r.get\\(\"symbol\"\\)} - {r.get\\(\"companyName\"\\)}'\\)\n        break\nelse:\n    print\\('\\\\næœªæ‰¾åˆ°TLT'\\)\n    \n# æœç´¢Treasuryç›¸å…³\ntreasury = [r for r in rows if 'Treasury' in r.get\\('companyName', ''\\)]\nprint\\(f'Treasuryç›¸å…³ETF: {len\\(treasury\\)}åª'\\)\nfor t in treasury[:10]:\n    print\\(f'  {t.get\\(\"symbol\"\\)}: {t.get\\(\"companyName\"\\)}'\\)\nEOF)",
      "Bash(npx tsx:*)",
      "Bash(npx prisma migrate:*)",
      "Bash(tasklist:*)",
      "Bash(findstr:*)",
      "Bash(netstat:*)",
      "Bash(taskkill:*)",
      "Bash(cmd //c \"taskkill /PID 11408 /F\")",
      "Bash(git checkout:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nrefactor: resolve asset prices from MarketInstrument at query time\n\nInstead of copying MarketInstrument.lastPrice to Asset.currentPrice via\nsync jobs, resolve prices directly from MarketInstrument when querying.\nThis eliminates data redundancy and ensures prices are always up-to-date.\n\n- Add priceResolver utility for batch price resolution \\(avoids N+1\\)\n- Update assetService, portfolioService, recommendationService to use resolved prices\n- Remove syncAllAssetPrices\\(\\), updatePrice\\(\\), and related sync cron jobs\n- Remove POST /api/market/sync endpoint\n- Asset.currentPrice retained as fallback for assets without market data\n\nCo-Authored-By: Claude Opus 4.6 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git push:*)",
      "Bash(gh pr create --title \"refactor: resolve asset prices from MarketInstrument at query time\" --body \"$\\(cat <<''EOF''\n## Summary\n\n- **æ¶ˆé™¤æ•°æ®å†—ä½™**: ä¸å†å°† `MarketInstrument.lastPrice` å¤åˆ¶åˆ° `Asset.currentPrice`ï¼Œæ”¹ä¸ºæŸ¥è¯¢æ—¶ç›´æŽ¥å¼•ç”¨\n- **æ–°å¢ž `priceResolver` å·¥å…·å‡½æ•°**: æŒ‰ `symbol+market` æ‰¹é‡åŒ¹é… MarketInstrumentï¼Œä¸€æ¬¡æŸ¥è¯¢è§£æžæ‰€æœ‰èµ„äº§ä»·æ ¼ï¼Œé¿å… N+1\n- **åˆ é™¤å†—ä½™åŒæ­¥æœºåˆ¶**: ç§»é™¤ `syncAllAssetPrices\\(\\)`ã€`updatePrice\\(\\)`ã€`POST /api/market/sync` è·¯ç”±ã€9AM/3:30PM cron job\n\n## æž¶æž„å˜åŒ–\n\n```\nä¹‹å‰: MarketInstrument.lastPrice â†’ \\(å®šæ—¶å¤åˆ¶\\) â†’ Asset.currentPrice â†’ å‰ç«¯æ˜¾ç¤º\nçŽ°åœ¨: MarketInstrument.lastPrice â†’ \\(æŸ¥è¯¢æ—¶ç›´æŽ¥è¯»å–\\) â†’ å‰ç«¯æ˜¾ç¤º\n                                    Asset.currentPrice ä»…ä½œä¸ºæ— å¸‚åœºæ•°æ®æ—¶çš„å›žé€€å€¼\n```\n\n## Test plan\n\n- [ ] `npx tsc --noEmit` ç±»åž‹æ£€æŸ¥é€šè¿‡\n- [ ] å¯åŠ¨åŽç«¯ï¼Œè®¿é—® portfolio detail é¡µé¢ç¡®è®¤èµ„äº§çŽ°ä»·æ˜¾ç¤ºä¸º MarketInstrument ä¸­çš„æœ€æ–°å€¼\n- [ ] ç¡®è®¤æ—  MarketInstrument æ•°æ®çš„èµ„äº§ä»æ˜¾ç¤º Asset.currentPrice ä½œä¸ºå›žé€€\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\nEOF\n\\)\")",
      "Bash(where:*)"
    ]
  }
}
